<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contact - Kushang Wadiwala | Graphic Design Services</title>
    <meta name="description" content="Get in touch with Kushang for professional graphic design services. Available for freelance projects in branding, web design, and more.">
    
    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:title" content="Contact - Kushang Wadiwala | Graphic Design Services">
    <meta property="og:description" content="Get in touch with Kushang for professional graphic design services.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourwebsite.com/contact">
    <meta property="og:image" content="https://yourwebsite.com/og-image.jpg">
    
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Contact - Kushang Wadiwala">
    <meta name="twitter:description" content="Get in touch for professional graphic design services.">
    
    <!-- Performance Optimization -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://formspree.io">
    
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="CSS/Contactme.css">
    <link rel="stylesheet" href="CSS/NavFoot.css">

</head>
<body>
  <!-- Header -->
  <header id="header">
    <div class="header-content">
      <a href="Home.html" class="logo" aria-label="Kushang - Home">KW<span class="logo-dot" aria-hidden="true" style="color:#FF7A30">.</span></a>
      
      <!-- Desktop Navigation -->
      <nav class="desktop-nav" aria-label="Main navigation">
        <a href="Home.html">Home</a>
        <a href="Aboutme.html">About</a>
        <a href="Work.html#MyProjects">Projects</a>
        <a href="Services.html">Services</a>
        <a href="Contact.html" class="cta-btn">Reach Out →</a>
      </nav>

      <!-- Mobile Menu Toggle -->
      <button 
        class="menu-toggle" 
        id="menuToggle" 
        aria-label="Toggle menu"
        aria-expanded="false"
        aria-controls="mobileOverlay"
      >
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </header>
  
  <!-- Mobile Menu Overlay -->
  <div id="mobileOverlay" role="dialog" aria-modal="true" aria-labelledby="mobile-nav-title">
    <div class="overlay-content">
      <h2 id="mobile-nav-title" class="visually-hidden">Navigation Menu</h2>
      <nav class="mobile-nav" aria-label="Mobile navigation">
        <a href="Home.html">Home</a>
        <a href="Aboutme.html">About</a>
        <a href="Work.html#MyProjects">Projects</a>
        <a href="Services.html">Services</a>
        <a href="Contact.html">Contact</a>
      </nav>

      <div class="mobile-footer">
        <a href="https://www.linkedin.com/in/kushangwadiwala" target="_blank" rel="noopener noreferrer">LinkedIn</a>
        <a href="mailto:kushangwadiwala@gmail.com">Email</a>
        <a href="mailto:kushangwadiwala@gmail.com" class="lets-talk-btn">Reach Out →</a>
      </div>
    </div>
  </div>

    <!-- Main Content -->
    <main class="main-container">
        
        <!-- Contact Information (Desktop) -->
        <section class="contact-info fade-in" aria-labelledby="contact-heading">
            <div class="section-label">Contact Me</div>
            <h1 id="contact-heading" class="main-title">Let's Work <span class="highlight">Together</span></h1>
            
            <p class="contact-description">
                I'm always interested in hearing about new projects and opportunities. Whether you have a question or just want to say hi, feel free to reach out.
            </p>
            
            <div class="contact-methods">
                <div class="contact-method">
                    <span class="method-label">Email</span>
                    <a href="mailto:kushangwadiwala@gmail.com" class="method-value">kushangwadiwala@gmail.com</a>
                </div>
                
                <div class="contact-method">
                    <span class="method-label">Location</span>
                    <span class="method-value">Surat, Gujarat</span>
                </div>
            </div>
            
            <div class="availability-status">
                <span class="status-dot" aria-hidden="true"></span>
                <span>Available for freelance projects</span>
            </div>

            <!-- Social Links (Desktop) -->
            <div class="social-section">
                <h2 class="social-title">Connect With Me</h2>
                <div class="social-links">
                    <a href="https://www.linkedin.com/in/kushangwadiwala" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                        <i class="bi bi-linkedin"></i>
                    </a>
                    <a href="https://dribbble.com/Kush0806" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Dribbble">
                        <i class="bi bi-dribbble"></i>
                    </a>
                    <a href="mailto:kushangwadiwala@gmail.com" class="social-link" aria-label="Email">
                        <i class="bi bi-envelope-fill"></i>
                    </a>
                </div>
            </div>
        </section>
        

        <!-- Contact Form -->
        <section class="contact-form-wrapper fade-in" aria-labelledby="form-heading">
            <!-- Mobile Form Header -->
            <div class="mobile-form-header">
    <div class="mobile-header-content">
        <span class="mobile-header-label">Get in Touch</span>
        <h1 class="mobile-header-title">
            Let's Work <span class="highlight-text">Together</span>
        </h1>
        <p class="mobile-header-subtitle">
            I'm always excited to hear about new projects and opportunities.
        </p>
        <div class="mobile-header-divider"></div>
    </div>
</div>
            
            <div class="form-container">
                <!-- Desktop Form Header -->
                <h2 id="form-heading" class="form-title">Send a Message</h2>
                <p class="form-subtitle">Fill out the form below and I'll get back to you within 24 hours.</p>
                
                <!-- Messages -->
                <div class="message message--success" id="successMessage" role="alert">
                    <i class="bi bi-check-circle-fill" aria-hidden="true"></i> 
                    <span>Thank you! Your message has been sent successfully.</span>
                </div>
                
                <div class="message message--error" id="errorMessage" role="alert">
                    <i class="bi bi-exclamation-circle-fill" aria-hidden="true"></i> 
                    <span id="errorText">Sorry, there was an error sending your message.</span>
                </div>
                
                <form id="contactForm" action="https://formspree.io/f/mnnzkzlv" method="POST" novalidate>
                    <!-- Honeypot field for spam protection -->
                    <div class="hp-field" aria-hidden="true">
                        <label for="honeypot">Don't fill this out if you're human</label>
                        <input type="text" id="honeypot" name="_gotcha" tabindex="-1" autocomplete="off">
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="name">Name <span aria-label="required">*</span></label>
                        <input type="text" id="name" name="name" class="form-input" required aria-required="true">
                        <span class="field-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="email">Email Address <span aria-label="required">*</span></label>
                        <input type="email" id="email" name="email" class="form-input" required aria-required="true">
                        <span class="field-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="company">Company (Optional)</label>
                        <input type="text" id="company" name="company" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="service">Service Required <span aria-label="required">*</span></label>
                        <select id="service" name="service" class="form-select" required aria-required="true">
                            <option value="">Select a service</option>
                            <option value="branding">Branding & Identity</option>
                            <option value="logo">Logo Design</option>
                            <option value="web">Web Design</option>
                            <option value="print">Print Design</option>
                            <option value="packaging">Packaging Design</option>
                            <option value="social">Social Media Design</option>
                            <option value="other">Other</option>
                        </select>
                        <span class="field-error" role="alert"></span>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="message">Message <span aria-label="required">*</span></label>
                        <textarea id="message" name="message" class="form-textarea" placeholder="Tell me about your project..." required aria-required="true"></textarea>
                        <span class="field-error" role="alert"></span>
                    </div>
                    
                    <button type="submit" class="submit-btn" id="submitBtn">
                        <span class="btn-text">Send Message</span>
                    </button>
                </form>

                <!-- Mobile Contact Info -->
                <div class="mobile-contact-info">
                    <div class="mobile-contact-grid">
                        <a href="mailto:kushangwadiwala@gmail.com" class="mobile-contact-item">
                            <span class="mobile-contact-label">Email</span>
                            <span class="mobile-contact-value">kushangwadiwala@gmail.com</span>
                        </a>
                        
                        <div class="mobile-contact-item">
                            <span class="mobile-contact-label">Location</span>
                            <span class="mobile-contact-value">Surat, Gujarat</span>
                        </div>
                    </div>

                    <div class="mobile-social-links">
                        <a href="https://www.linkedin.com/in/kushangwadiwala" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="LinkedIn">
                            <i class="bi bi-linkedin"></i>
                        </a>
                        <a href="https://dribbble.com/Kush0806" target="_blank" rel="noopener noreferrer" class="social-link" aria-label="Dribbble">
                            <i class="bi bi-dribbble"></i>
                        </a>
                        <a href="mailto:kushangwadiwala@gmail.com" class="social-link" aria-label="Email">
                            <i class="bi bi-envelope-fill"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- FAQ Section -->
    <section class="faq-section" aria-labelledby="faq-heading">
        <div class="faq-header">
            <h2 id="faq-heading" class="faq-title">Frequently Asked <span class="highlight">Questions</span></h2>
            <p class="faq-subtitle">Find answers to common questions about my services and process</p>
        </div>

        <div class="faq-container">
            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq1">
                    What services do you offer?
                </button>
                <div id="faq1" class="faq-answer">
                    <p>I offer a comprehensive range of design services including:</p>
                    <ul>
                        <li>Brand Identity Design (logos, color schemes, typography)</li>
                        <li>Print Design (business cards, brochures, posters)</li>
                        <li>Digital Design (social media graphics, web banners)</li>
                        <li>UI/UX Design for websites and mobile apps</li>
                        <li>Packaging Design</li>
                        <li>Marketing Materials</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq2">
                    What is your typical project timeline?
                </button>
                <div id="faq2" class="faq-answer">
                    <p>Project timelines vary depending on the scope and complexity. Generally, logo designs take 1-2 weeks, complete brand identity packages take 3-4 weeks, and website designs can take 4-8 weeks. I'll provide a detailed timeline during our initial consultation.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq3">
                    How does the design process work?
                </button>
                <div id="faq3" class="faq-answer">
                    <p>My design process typically follows these steps:</p>
                    <ul>
                        <li>Initial consultation to understand your needs</li>
                        <li>Research and concept development</li>
                        <li>Presentation of initial designs</li>
                        <li>Feedback and revisions</li>
                        <li>Final delivery in all required formats</li>
                    </ul>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq4">
                    What are your payment terms?
                </button>
                <div id="faq4" class="faq-answer">
                    <p>I typically require a 50% deposit to begin work, with the remaining 50% due upon project completion. For larger projects, we can arrange milestone-based payments. I accept bank transfers, UPI, and international payments via PayPal.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq5">
                    Do you work with international clients?
                </button>
                <div id="faq5" class="faq-answer">
                    <p>Yes! I work with clients from around the world. I'm based in India (IST timezone) but I'm flexible with meeting times to accommodate different time zones. All communication can be done via email, video calls, or your preferred method.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq6">
                    How many revisions are included?
                </button>
                <div id="faq6" class="faq-answer">
                    <p>I typically include 3 rounds of revisions in my standard packages. This ensures we can refine the design to perfectly match your vision. Additional revisions can be accommodated for an additional fee if needed.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq7">
                    What file formats will I receive?
                </button>
                <div id="faq7" class="faq-answer">
                    <p>You'll receive your designs in multiple formats suitable for both print and digital use, including AI, EPS, PDF, PNG, and JPG files. For web projects, you'll receive optimized files and, if applicable, the source code.</p>
                </div>
            </div>

            <div class="faq-item">
                <button class="faq-question" aria-expanded="false" aria-controls="faq8">
                    Do you provide ongoing support?
                </button>
                <div id="faq8" class="faq-answer">
                    <p>Yes, I offer ongoing support and maintenance packages for clients who need regular design updates or new materials. We can discuss a retainer arrangement that suits your needs.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">    
        <div class="footer-container">
            <div class="footer-top">
                <div class="footer-brand">
                    <h3>Designs that speak for themselves.</h3>
                    <div class="footer-cta">
                        <a href="Contact.html" class="footer-button">Reach Out →</a>
                    </div>
                </div>
                
                <div class="footer-links-container">
                    <nav class="footer-link-group" aria-labelledby="footer-nav-title">
                        <h4 id="footer-nav-title">Navigate</h4>
                        <ul>
                            <li><a href="Home.html">Home</a></li>
                            <li><a href="Aboutme.html">About</a></li>
                            <li><a href="Work.html#MyProjects">Projects</a></li>
                            <li><a href="Contact.html">Contact</a></li>
                        </ul>
                    </nav>
                    
                    <nav class="footer-link-group" aria-labelledby="footer-connect-title">
                        <h4 id="footer-connect-title">Connect</h4>
                        <ul>
                            <li><a href="https://www.linkedin.com/in/kushangwadiwala" target="_blank" rel="noopener noreferrer">LinkedIn ↗</a></li>
                            <li><a href="https://dribbble.com/Kush0806" target="_blank" rel="noopener noreferrer">Dribbble ↗</a></li>
                            <li><a href="mailto:kushangwadiwala@gmail.com">Email ↗</a></li>
                        </ul>
                    </nav>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p class="footer-copyright">
                    Made with <i class="bi bi-heart-fill" aria-label="love"></i> in Surat, India
                </p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Enhanced Contact Form Handler with Rate Limiting and Better Validation
        class ContactForm {
            constructor() {
                this.form = document.getElementById('contactForm');
                this.submitBtn = document.getElementById('submitBtn');
                this.successMessage = document.getElementById('successMessage');
                this.errorMessage = document.getElementById('errorMessage');
                this.errorText = document.getElementById('errorText');
                this.btnText = this.submitBtn.querySelector('.btn-text');
                this.lastSubmitTime = 0;
                this.submitCooldown = 3000; // 3 seconds cooldown
                
                this.init();
            }

            init() {
                this.form.addEventListener('submit', this.handleSubmit.bind(this));
                this.addFieldValidation();
                this.addAutoResize();
                this.trackFormInteractions();
            }

            async handleSubmit(e) {
                e.preventDefault();
                
                // Check for honeypot
                const honeypot = document.getElementById('honeypot');
                if (honeypot && honeypot.value) {
                    console.warn('Spam detected');
                    return false;
                }

                // Rate limiting check
                const now = Date.now();
                if (now - this.lastSubmitTime < this.submitCooldown) {
                    this.showError('Please wait a moment before submitting again.');
                    return;
                }
                
                if (!this.validateForm()) {
                    this.showError('Please fix the errors before submitting.');
                    return;
                }
                
                this.lastSubmitTime = now;
                this.setLoadingState(true);
                
                try {
                    const response = await fetch(this.form.action, {
                        method: 'POST',
                        body: new FormData(this.form),
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        this.showSuccess();
                        // Track successful submission (add your analytics here)
                        // gtag('event', 'form_submission_success');
                    } else {
                        const data = await response.json();
                        throw new Error(data.error || 'Form submission failed');
                    }
                } catch (error) {
                    console.error('Form submission error:', error);
                    this.showError('Sorry, there was an error sending your message. Please try again or email me directly.');
                } finally {
                    this.setLoadingState(false);
                }
            }

            validateForm() {
                let isValid = true;
                const requiredFields = this.form.querySelectorAll('[required]');
                
                requiredFields.forEach(field => {
                    if (!this.validateField(field)) {
                        isValid = false;
                    }
                });
                
                return isValid;
            }

            validateField(field) {
                const errorSpan = field.nextElementSibling;
                let isValid = true;
                let errorMessage = '';

                // Clear previous error
                if (errorSpan && errorSpan.classList.contains('field-error')) {
                    errorSpan.textContent = '';
                    errorSpan.classList.remove('show');
                }

                // Check if field is empty
                if (field.hasAttribute('required') && !field.value.trim()) {
                    errorMessage = `${field.labels[0]?.textContent.replace('*', '').trim() || 'This field'} is required`;
                    isValid = false;
                }
                // Email validation
                else if (field.type === 'email' && field.value) {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (!emailRegex.test(field.value)) {
                        errorMessage = 'Please enter a valid email address';
                        isValid = false;
                    }
                }
                // Select validation
                else if (field.tagName === 'SELECT' && !field.value) {
                    errorMessage = 'Please select an option';
                    isValid = false;
                }

                // Set aria-invalid
                field.setAttribute('aria-invalid', !isValid);

                // Show error message
                if (!isValid && errorSpan) {
                    errorSpan.textContent = errorMessage;
                    errorSpan.classList.add('show');
                }

                return isValid;
            }

            setLoadingState(loading) {
                this.submitBtn.disabled = loading;
                this.btnText.textContent = loading ? 'Sending...' : 'Send Message';
                this.submitBtn.classList.toggle('loading', loading);
            }

            showSuccess() {
                this.successMessage.classList.add('show');
                this.errorMessage.classList.remove('show');
                this.form.reset();
                
                // Clear all field errors
                this.form.querySelectorAll('.field-error').forEach(error => {
                    error.classList.remove('show');
                    error.textContent = '';
                });
                
                this.successMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                setTimeout(() => {
                    this.successMessage.classList.remove('show');
                }, 5000);
            }

            showError(message) {
                this.errorText.textContent = message;
                this.errorMessage.classList.add('show');
                this.successMessage.classList.remove('show');
                this.errorMessage.scrollIntoView({ behavior: 'smooth', block: 'center' });
                
                setTimeout(() => {
                    this.errorMessage.classList.remove('show');
                }, 5000);
            }

            addFieldValidation() {
                const fields = this.form.querySelectorAll('.form-input, .form-textarea, .form-select');
                
                fields.forEach(field => {
                    // Validate on blur
                    field.addEventListener('blur', () => {
                        if (field.value || field.hasAttribute('required')) {
                            this.validateField(field);
                        }
                    });

                    // Clear error on input
                    field.addEventListener('input', () => {
                        const errorSpan = field.nextElementSibling;
                        if (errorSpan && errorSpan.classList.contains('field-error')) {
                            errorSpan.classList.remove('show');
                            field.setAttribute('aria-invalid', 'false');
                        }
                    });
                });
            }

            addAutoResize() {
                const textarea = document.getElementById('message');
                textarea.addEventListener('input', function() {
                    this.style.height = 'auto';
                    this.style.height = this.scrollHeight + 'px';
                });
            }

            trackFormInteractions() {
                // Track when user starts filling the form (fires only once per field)
                const fields = this.form.querySelectorAll('.form-input, .form-textarea, .form-select');
                fields.forEach(field => {
                    field.addEventListener('focus', () => {
                        // Add your analytics tracking here
                        // gtag('event', 'form_field_focus', { field_name: field.name });
                    }, { once: true });
                });

                // Service selection enhancement
                const serviceSelect = document.getElementById('service');
                serviceSelect.addEventListener('change', function() {
                    const messageTextarea = document.getElementById('message');
                    if (this.value === 'other') {
                        messageTextarea.placeholder = 'Please describe the service you need in detail...';
                        messageTextarea.focus();
                    } else {
                        messageTextarea.placeholder = 'Tell me about your project...';
                    }
                });
            }
        }

        // FAQ Accordion Handler
        class FAQAccordion {
            constructor() {
                this.items = document.querySelectorAll('.faq-item');
                this.init();
            }

            init() {
                this.items.forEach(item => {
                    const question = item.querySelector('.faq-question');
                    
                    question.addEventListener('click', () => this.toggleItem(item));
                    question.addEventListener('keydown', (e) => {
                        if (e.key === 'Enter' || e.key === ' ') {
                            e.preventDefault();
                            this.toggleItem(item);
                        }
                    });
                });
            }

            toggleItem(item) {
                const isActive = item.classList.contains('active');
                const question = item.querySelector('.faq-question');
                
                // Close all other items
                this.items.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains('active')) {
                        otherItem.classList.remove('active');
                        otherItem.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
                    }
                });
                
                // Toggle current item
                item.classList.toggle('active');
                question.setAttribute('aria-expanded', !isActive);
            }
        }

        // Intersection Observer for animations
        class AnimationObserver {
            constructor() {
                this.elements = document.querySelectorAll('.fade-in');
                this.init();
            }

            init() {
                const options = {
                    threshold: 0.1,
                    rootMargin: '0px 0px -50px 0px'
                };

                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('visible');
                            observer.unobserve(entry.target); // Stop observing once visible
                        }
                    });
                }, options);

                this.elements.forEach(el => observer.observe(el));
            }
        }

        // Network Status Handler
        class NetworkStatus {
            constructor() {
                this.init();
            }

            init() {
                window.addEventListener('offline', this.handleOffline.bind(this));
                window.addEventListener('online', this.handleOnline.bind(this));
            }

            handleOffline() {
                const message = this.createMessage('offline');
                document.body.appendChild(message);
            }

            handleOnline() {
                const offlineMessage = document.querySelector('.network-message--offline');
                if (offlineMessage) {
                    offlineMessage.remove();
                }
            }

            createMessage(type) {
                const message = document.createElement('div');
                message.className = `network-message network-message--${type}`;
                
                if (type === 'offline') {
                    message.innerHTML = '<i class="bi bi-wifi-off"></i> You appear to be offline. Please check your connection.';
                }
                
                return message;
            }
        }

        // Initialize everything when DOM is ready
        document.addEventListener('DOMContentLoaded', () => {
            new ContactForm();
            new FAQAccordion();
            new AnimationObserver();
            new NetworkStatus();
        });

        // Prevent form resubmission on page refresh
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }
    </script>

    <!-- Navbar Script -->
    <script>
        (function() {
            'use strict';

            const header = document.getElementById('header');
            const menuToggle = document.getElementById('menuToggle');
            const mobileOverlay = document.getElementById('mobileOverlay');
            const logo = document.querySelector('.logo');
            const body = document.body;
            const mobileNavLinks = document.querySelectorAll('.mobile-nav a');
            const focusableElements = mobileOverlay.querySelectorAll('a, button');

            let lastScrollY = window.scrollY;
            let ticking = false;
            let isMenuOpen = false;
            let lastFocusedElement = null;

            function updateHeader() {
                const currentScrollY = window.scrollY;
                
                header.classList.toggle('scrolled', currentScrollY > 50);
                
                if (!isMenuOpen) {
                    if (currentScrollY > lastScrollY && currentScrollY > 100) {
                        header.classList.add('hidden');
                    } else {
                        header.classList.remove('hidden');
                    }
                }
                
                lastScrollY = currentScrollY;
                ticking = false;
            }

            window.addEventListener('scroll', () => {
                if (!ticking) {
                    window.requestAnimationFrame(updateHeader);
                    ticking = true;
                }
            }, { passive: true });

            function trapFocus(e) {
                if (!isMenuOpen) return;

                const firstFocusable = focusableElements[0];
                const lastFocusable = focusableElements[focusableElements.length - 1];

                if (e.key === 'Tab') {
                    if (e.shiftKey) {
                        if (document.activeElement === firstFocusable) {
                            e.preventDefault();
                            lastFocusable.focus();
                        }
                    } else {
                        if (document.activeElement === lastFocusable) {
                            e.preventDefault();
                            firstFocusable.focus();
                        }
                    }
                }
            }

            document.addEventListener('keydown', trapFocus);

            function closeMenu() {
                mobileOverlay.classList.remove('active');
                menuToggle.classList.remove('active');
                header.classList.remove('menu-open');
                logo.classList.remove('hide');
                body.style.overflow = '';
                menuToggle.setAttribute('aria-expanded', 'false');
                isMenuOpen = false;

                if (lastFocusedElement) {
                    lastFocusedElement.focus();
                }
            }

            function openMenu() {
                lastFocusedElement = document.activeElement;
                mobileOverlay.classList.add('active');
                menuToggle.classList.add('active');
                header.classList.add('menu-open');
                logo.classList.add('hide');
                body.style.overflow = 'hidden';
                menuToggle.setAttribute('aria-expanded', 'true');
                isMenuOpen = true;

                setTimeout(() => {
                    mobileNavLinks[0].focus();
                }, 100);
            }

            if (menuToggle) {
                menuToggle.addEventListener('click', () => {
                    if (isMenuOpen) {
                        closeMenu();
                    } else {
                        openMenu();
                    }
                });
            }

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', closeMenu);
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && isMenuOpen) {
                    closeMenu();
                }
            });

            mobileOverlay.addEventListener('touchmove', (e) => {
                if (e.target === mobileOverlay) {
                    e.preventDefault();
                }
            }, { passive: false });

            // Show header on mouse hover near top
            let hoverTimeout;
            let mouseMoveTimeout;
            document.addEventListener('mousemove', (e) => {
                clearTimeout(mouseMoveTimeout);
                mouseMoveTimeout = setTimeout(() => {
                    if (e.clientY < 100) {
                        header.classList.remove('hidden');
                        clearTimeout(hoverTimeout);
                        hoverTimeout = setTimeout(() => {
                            if (window.scrollY > 100 && e.clientY > 100) {
                                header.classList.add('hidden');
                            }
                        }, 2000);
                    }
                }, 100);
            }, { passive: true });
        })();
    </script>
</body>
</html>